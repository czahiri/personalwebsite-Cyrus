<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Shows | Cyrus Zahiri</title>
    <link rel="stylesheet" href="/style.css">
    <!-- Leaflet map styles -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    <!-- Firebase SDKs (auto-configured by Hosting) -->
    <script defer src="/__/firebase/12.4.0/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/12.4.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/init.js?useEmulator=false"></script>
    <script defer src="/scripts/tv.js"></script>
    <style>
        body { background: radial-gradient(1000px 600px at -10% -10%, #e8f2ff 0%, rgba(232,242,255,0) 60%), radial-gradient(900px 500px at 110% 0%, #fff0f3 0%, rgba(255,240,243,0) 60%), #ffffff; }
        .wrap { max-width: 960px; margin: 24px auto; padding: 0 16px; }
        .page-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #e5e5ea; }
        .page-header::after { content:''; display:block; position: absolute; left:0; right:0; height: 4px; background: linear-gradient(90deg, #0a84ff, #5856d6, #ff375f); transform: translateY(22px); opacity: 0.25; }
        .title { margin: 0; font-size: 22px; }
        .back { color: #0a84ff; text-decoration: none; }
        .controls { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin: 8px 0; }
        .search { padding: 8px 10px; border: 1px solid #e5e5ea; border-radius: 8px; min-width: 220px; }
        .list { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 14px; }
        .card { position: relative; border: 2px solid #e5e5ea; border-radius: 14px; padding: 12px; background: rgba(255,255,255,0.9); backdrop-filter: blur(6px); box-shadow: 0 6px 16px rgba(10,132,255,0.08); display: grid; gap: 10px; transition: transform 160ms ease, box-shadow 160ms ease; overflow: hidden; }
        .card::before { content:''; position:absolute; inset:0; pointer-events:none; background: linear-gradient(180deg, rgba(255,255,255,0.0), rgba(10,132,255,0.05)); opacity: 0.6; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(10,132,255,0.16); }
        .card h3 { margin: 0; font-size: 20px; }
        .meta-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
        .badge { display: inline-block; padding: 4px 10px; border-radius: 999px; border: 1px solid #e5e5ea; font-size: 12px; background: linear-gradient(180deg, #f2f8ff, #e9f3ff); }
        .meta { color: #3a3a3c; font-size: 13px; }
        .desc { color: #1c1c1e; font-size: 14px; margin: 0; }
        .attrs { display: grid; grid-template-columns: 1fr; gap: 6px; }
        .attr { display: grid; grid-template-columns: 110px 1fr; align-items: start; gap: 6px; }
        .attr .label { font-size: 12px; color: #3a3a3c; }
        .attr .value { font-size: 14px; color: #1c1c1e; }
        .map { width: 100%; height: 180px; border: 0; border-radius: 10px; }
        .miniMap { width: 100%; height: 160px; border-radius: 10px; border: 1px solid #e5e5ea; overflow: hidden; }
        .empty { color: #3a3a3c; padding: 16px; text-align: center; }
        .error { color: #b00020; padding: 12px; border: 1px solid #ffd1d1; background: #fff5f5; border-radius: 8px; margin-bottom: 12px; }
        .bigmap { width: 100%; height: 320px; border-radius: 12px; border: 1px solid #e5e5ea; overflow: hidden; }
        body.dark .card { background: #141415; border-color: #2c2c2e; }
        body.dark .meta { color: #d1d1d6; }
        body.dark .desc { color: #f5f5f7; }
        body.dark .search { background: #0b0b0c; border-color: #2c2c2e; color: #f5f5f7; }
        /* Add Show form */
        .form { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 8px; border: 1px solid #e5e5ea; border-radius: 12px; padding: 12px; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.04); }
        .form .row { display: grid; gap: 4px; }
        .form input, .form textarea { padding: 8px 10px; border: 1px solid #e5e5ea; border-radius: 8px; }
        .form textarea { min-height: 60px; }
        .form-actions { display: flex; gap: 8px; align-items: center; }
        .pill { padding: 8px 12px; background: linear-gradient(90deg, #0a84ff, #5856d6); color: #fff; border: 0; border-radius: 999px; }
        .pill:hover { filter: brightness(1.05); }
    </style>
    </head>
<body>
    <div class="wrap">
        <div class="page-header">
            <h1 class="title">TV Shows</h1>
            <a class="back" href="/#projects">← Back</a>
        </div>
        <div id="error" class="error" style="display:none;"></div>
        <div class="controls">
            <input id="search" class="search" type="search" placeholder="Search by title, genre..." />
            <button id="refresh" class="pill">Refresh</button>
            <button id="toggleForm" class="pill">Add Show</button>
        </div>
        <div id="bigMap" class="bigmap" style="margin-bottom:12px;"></div>
        <div id="formWrap" class="form" style="display:none; margin-bottom:8px;">
            <div class="row">
                <label for="newTitle">Title</label>
                <input id="newTitle" type="text" placeholder="The Example Show" />
            </div>
            <div class="row">
                <label for="newYear">Year</label>
                <input id="newYear" type="number" placeholder="2024" />
            </div>
            <div class="row">
                <label for="newGenre">Genre</label>
                <input id="newGenre" type="text" placeholder="Drama" />
            </div>
            <div class="row">
                <label for="newRating">Rating</label>
                <input id="newRating" type="text" placeholder="8.7" />
            </div>
            <div class="row" style="grid-column: 1 / -1;">
                <label for="newPoster">Poster URL</label>
                <input id="newPoster" type="url" placeholder="https://example.com/poster.jpg" />
            </div>
            <div class="row" style="grid-column: 1 / -1;">
                <label for="newDesc">Description</label>
                <textarea id="newDesc" placeholder="Short synopsis..."></textarea>
            </div>
            <div class="row">
                <label for="newLat">Latitude</label>
                <input id="newLat" type="number" step="any" placeholder="34.0522" />
            </div>
            <div class="row">
                <label for="newLng">Longitude</label>
                <input id="newLng" type="number" step="any" placeholder="-118.2437" />
            </div>
            <div class="form-actions" style="grid-column: 1 / -1;">
                <button id="addShow" class="pill">Save</button>
                <span id="formStatus" class="meta"></span>
            </div>
        </div>
        <div id="status" class="meta" style="margin:8px 0;">Loading…</div>
        <div id="list" class="list"></div>
        <div id="empty" class="empty" style="display:none;">No shows found.</div>
    </div>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</body>
</html>

